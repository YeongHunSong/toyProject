<!DOCTYPE HTML>
<html xmlns:th="http://www.thymeleaf.org" lang="ko">
<head>
    <meta charset="utf-8">
    <link href="../css/bootstrap.min.css" th:href="@{/css/bootstrap.min.css}" rel="stylesheet">
    <style>
        .container {
            max-width: 560px;
        }
    </style>
    <title>게시판 목록</title>
</head>
<body>
<div class="container" style="max-width: 600px">
    <div class="py-5 text-center">
        <h2>게시판 목록</h2>
    </div>
    <div class="row">
        <div class="col" th:if="${session?.username != null}">
            <button class="w-80 btn btn-primary float-start" th:text="|${session?.username} 님|"
                    th:onclick="|location.href='@{|/member/${session.loginMember}|}'|" type="button">내 정보</button>
        </div>
        <div class="col" th:if="${session?.username == null}">
            <button class="w-30 btn btn-secondary float-end"
                    th:onclick="|location.href='@{/login?redirectURL=/postHome}'|" type="button">로그인</button>
        </div>
        <div class="col" th:if="${session?.username != null}">
            <button class="w-30 btn btn-secondary float-end"
                    th:onclick="|location.href='@{/logout?redirectURL=/postHome}'|" type="button">로그아웃</button>
<!--            <form th:action="@{/logout?redirect=postHome}" method="post">-->
<!--                <button class="w-60 btn btn-secondary float-end" type="submit">로그아웃</button>-->
<!--            </form>-->
        </div>
    </div>
    <br>
    <div class="row">
        <div class="col" th:if="${searchTrg == 'off'}">
            <form th:action="@{|/postHome/search|}" method="post">
                <button class="w-30 btn btn-primary float-start" type="submit">게시글 검색</button>
            </form>
        </div>
        <div class="col" th:if="${searchTrg == 'on'}">
            <form th:action="@{|/postHome/search|}" method="post">
                <button class="w-30 btn btn-primary float-start" type="submit">검색 취소</button>
            </form>
        </div>
        <div class="col" th:if="${session?.username != null}">
            <button class="w-60 btn btn-primary float-start"
                    th:onclick="|location.href='@{/post/add}'|" type="button">글쓰기</button>
        </div>
        <div class="col">
            <button class="w-70 btn btn-secondary float-end"
                    th:onclick="|location.href='@{/memberHome}'|" type="button">회원 목록</button>
        </div>
    </div>

    <br th:if="${searchTrg == 'on'}">
    <form th:action="@{|/postHome|}" method="get" th:if="${searchTrg == 'on'}" class="row">
        <div class="col-auto">
            <select class="form-select" th:field="${cond.searchType}">
                <option selected th:value="title">제목</option>
                <option  th:value="content">내용</option>
                <option th:value="username">작성자</option>
            </select>
        </div>
        <div class="col-auto">
            <input type="text" th:field="${cond.searchKeyword}" class="form-control" placeholder="검색어를 입력해주세요" th:value="${cond.searchKeyword}">
        </div>
        <div class="col-auto">
            <button class="btn btn-primary" type="submit">검색</button>
        </div>
    </form>

    <hr class="my-4">
    <div>
        <table class="table" th:if="${#lists.size(postList) == 0}">
            <tbody>
            <br><br>
            <p>게시글이 없습니다.</p>
            </tbody>
        </table>

        <table class="table" th:if="${#lists.size(postList) != 0}">
            <thead>
            <tr>
                <td>번호</td>
                <td>제목</td>
                <td>작성자</td>
                <td>작성일</td>
                <td>조회</td>
                <td>추천</td>
            </tr>
            </thead>
            <tbody>
            <tr th:each="post : ${postList}"> <!-- th:href="@{/member/{memberId}(memberId=${member.id})}" -->
                <td><p th:text="${postStat.count}">글 번호</p></td>
<!--                <td><p th:text="${post.category}">카테고리</p></td>-->
                <td><a href="" th:href="@{|/post/${post.postId}|}" th:text="${post.postTitle}">제목</a></td>
                <td><a href="" th:href="@{|/member/${post.memberId}|}" th:text="${post.username}">작성자 이름</a></td>
<!--                <td><p th:text="${post.nickname}">회원 별칭값</p></td>-->
                <!-- 작성글 목록 볼 수 있는 팝업창이 나오도록 하기 -->
                <td><p th:text="${#temporals.format(post.writingDate, 'MM-dd HH:mm')}">작성일</p></td> <!-- 날짜 포맷 수정 -->
                <td><p th:text="|${post.viewCount}|">조회수</p></td>
                <td><p th:text="|${post.recommendCount}|"></p></td>
            </tr>
            </tbody>
        </table>
    </div>
</div> <!-- /container -->
</body>
</html>